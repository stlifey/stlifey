From 9a998209d3efdbeb3f65e2440145f793504e764d Mon Sep 17 00:00:00 2001
From: stlifey joe <stlifey@gmail.com>
Date: Tue, 22 Apr 2014 02:05:32 +0800
Subject: [PATCH] remove vaapi vo

---
 DOCS/man/en/vo.rst | 43 -------------------------------------------
 video/out/vo.c     |  4 ----
 wscript_build.py   |  1 -
 3 files changed, 48 deletions(-)

diff --git a/DOCS/man/en/vo.rst b/DOCS/man/en/vo.rst
index 795618e..43fe095 100644
--- a/DOCS/man/en/vo.rst
+++ b/DOCS/man/en/vo.rst
@@ -737,49 +737,6 @@ Available video output drivers are:
     ``switch-mode``
         Instruct SDL to switch the monitor video mode when going fullscreen.
 
-``vaapi``
-    Intel VA API video output driver with support for hardware decoding. Note
-    that there is absolutely no reason to use this, other than wanting to use
-    hardware decoding to save power on laptops, or possibly preventing video
-    tearing with some setups.
-
-    .. note:: This driver is for compatibility with crappy systems. You can
-              use vaapi hardware decoding with ``--vo=opengl`` too.
-
-    ``scaling=<algorithm>``
-        default
-            Driver default (mpv default as well).
-        fast
-            Fast, but low quality.
-        hq
-            Unspecified driver dependent high-quality scaling, slow.
-        nla
-            ``non-linear anamorphic scaling``
-
-    ``deint-mode=<mode>``
-        Select deinterlacing algorithm. Note that by default deinterlacing is
-        initially always off, and needs to be enabled with the ``D`` key
-        (default key binding for ``cycle deinterlace``).
-
-        This option doesn't apply if libva supports video post processing (vpp).
-        In this case, the default for ``deint-mode`` is ``no``, and enabling
-        deinterlacing via user interaction using the methods mentioned above
-        actually inserts the ``vavpp`` video filter. If vpp is not actually
-        supported with the libva backend in use, you can use this option to
-        forcibly enable VO based deinterlacing.
-
-        no
-            Don't allow deinterlacing (default for newer libva).
-        first-field
-            Show only first field (going by ``--field-dominance``).
-        bob
-            bob deinterlacing (default for older libva).
-
-    ``scaled-osd=<yes|no>``
-        If enabled, then the OSD is rendered at video resolution and scaled to
-        display resolution. By default, this is disabled, and the OSD is
-        rendered at display resolution if the driver supports it.
-
 ``null``
     Produces no video output. Useful for benchmarking.
 
diff --git a/video/out/vo.c b/video/out/vo.c
index 9af1d59..1485fca 100644
--- a/video/out/vo.c
+++ b/video/out/vo.c
@@ -61,7 +61,6 @@ extern struct vo_driver video_out_direct3d;
 extern struct vo_driver video_out_direct3d_shaders;
 extern struct vo_driver video_out_sdl;
 extern struct vo_driver video_out_corevideo;
-extern struct vo_driver video_out_vaapi;
 extern struct vo_driver video_out_wayland;
 
 const struct vo_driver *video_out_drivers[] =
@@ -88,9 +87,6 @@ const struct vo_driver *video_out_drivers[] =
 #if HAVE_GL
         &video_out_opengl_old,
 #endif
-#if HAVE_VAAPI
-        &video_out_vaapi,
-#endif
 #if HAVE_X11
         &video_out_x11,
 #endif
diff --git a/wscript_build.py b/wscript_build.py
index 62328c4..c42f63c 100644
--- a/wscript_build.py
+++ b/wscript_build.py
@@ -350,7 +350,6 @@ def build(ctx):
         ( "video/out/vo_opengl.c",               "gl" ),
         ( "video/out/vo_opengl_old.c",           "gl" ),
         ( "video/out/vo_sdl.c",                  "sdl2" ),
-        ( "video/out/vo_vaapi.c",                "vaapi" ),
         ( "video/out/vo_vdpau.c",                "vdpau" ),
         ( "video/out/vo_wayland.c",              "wayland" ),
         ( "video/out/vo_x11.c" ,                 "x11" ),
-- 
1.9.2

